import type { StorageAgentType, StorageCreateAgentInput, StorageUpdateAgentInput, StorageListAgentsInput, StorageListAgentsOutput } from '../../types.js';
import type { InMemoryDB } from '../inmemory-db.js';
import type { AgentVersion, CreateVersionInput, ListVersionsInput, ListVersionsOutput } from './base.js';
import { AgentsStorage } from './base.js';
export declare class InMemoryAgentsStorage extends AgentsStorage {
    private db;
    constructor({ db }: {
        db: InMemoryDB;
    });
    dangerouslyClearAll(): Promise<void>;
    getById(id: string): Promise<StorageAgentType | null>;
    create(input: {
        agent: StorageCreateAgentInput;
    }): Promise<StorageAgentType>;
    update(input: StorageUpdateAgentInput): Promise<StorageAgentType>;
    delete(id: string): Promise<void>;
    list(args?: StorageListAgentsInput): Promise<StorageListAgentsOutput>;
    createVersion(input: CreateVersionInput): Promise<AgentVersion>;
    getVersion(id: string): Promise<AgentVersion | null>;
    getVersionByNumber(agentId: string, versionNumber: number): Promise<AgentVersion | null>;
    getLatestVersion(agentId: string): Promise<AgentVersion | null>;
    listVersions(input: ListVersionsInput): Promise<ListVersionsOutput>;
    deleteVersion(id: string): Promise<void>;
    deleteVersionsByParentId(entityId: string): Promise<void>;
    countVersions(agentId: string): Promise<number>;
    /**
     * Deep copy a thin agent record to prevent external mutation of stored data
     */
    private deepCopyAgent;
    /**
     * Deep copy a version to prevent external mutation of stored data
     */
    private deepCopyVersion;
    private sortAgents;
    private sortVersions;
}
//# sourceMappingURL=inmemory.d.ts.map